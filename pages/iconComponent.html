<!DOCTYPE html>
<html>
<link rel="stylesheet" href="../styles/results.css">
<link rel="stylesheet" href="../deps/highlight/styles/github.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<head>
    <title>Icon Components</title>
</head>

<body>
    <header class="fixed-header">
        <div class="header-top">
            <h1>IconComponent</h1>
            <div class="header-buttons">
                <button id="settings-btn" class="settings-button">
                    <i class="bi bi-gear-fill"></i> Code Gen Settings
                </button>
                <button id="reload-btn" class="reload-button">
                    Load Components
                </button>
                <button id="stop-btn" class="stop-button" style="display: none;">
                    <i class="bi bi-stop-fill"></i> Stop
                </button>
            </div>
        </div>
        <div class="figma-input-container">
            <label for="figma-url-input">Figma URL (Optional):</label>
            <input type="text" id="figma-url-input" placeholder="https://www.figma.com/design/...?node-id=183124-126309..." />
            <div class="size-config">
                <div class="setting-group">
                    <label for="size-select">Component Size:</label>
                    <select id="size-select">
                        <option value="small">Small (150x150)</option>
                        <option value="medium">Medium (300x300)</option>
                        <option value="large" selected>Large (500x500)</option>
                        <option value="xlarge">Extra Large (700x700)</option>
                    </select>
                </div>
            </div>
        </div>

    </header>

    <div id="main-content" class="main-content">
        <div class="loading-message">Loading icon components...</div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content settings-modal-content">
            <div class="modal-header">
                <h2>Code Generation Settings</h2>
                <span class="close-btn" id="settings-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="framework-select">Framework:</label>
                    <select id="framework-select">
                        <option value="vanilla">HTML + CSS (Default)</option>
                        <option value="react">React</option>
                        <option value="vue">Vue</option>
                        <option value="angular">Angular</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label for="css-framework-select">CSS Framework:</label>
                    <select id="css-framework-select">
                        <option value="vanilla">Vanilla CSS (Default)</option>
                        <option value="tailwind">Tailwind CSS</option>
                        <option value="bootstrap">Bootstrap</option>
                        <option value="styled-components">Styled Components</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label for="model-select">AI Model:</label>
                    <select id="model-select">
                        <option value="gpt-5-mini">GPT-5 Mini (Cost-effective)</option>
                        <option value="o4-mini">O4 Mini (Higher quality)</option>
                    </select>
                </div>
                
                <div class="setting-group checkbox-group">
                    <label>
                        <input type="checkbox" id="responsive-check" checked>
                        Include Responsive Design
                    </label>
                </div>
                
                <div class="setting-group checkbox-group">
                    <label>
                        <input type="checkbox" id="interactions-check">
                        Include Hover/Focus States
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings-btn" class="save-button">Save Settings</button>
                <button id="cancel-settings-btn" class="cancel-button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Code Viewer Modal -->
    <div id="code-modal" class="modal" style="display: none;">
        <div class="modal-content code-modal-content">
            <div class="modal-header">
                <h2 id="code-modal-title">Generated Code</h2>
                <span class="close-btn" id="code-close">&times;</span>
            </div>
            <div class="modal-body code-modal-body">
                <div class="loading-spinner" id="code-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Generating code...</p>
                </div>
                <div id="code-content" style="display: none;">
                    <div class="file-tabs" id="file-tabs"></div>
                    <div class="code-editor">
                        <div class="editor-header">
                            <span id="current-filename">Loading...</span>
                            <button id="copy-code-btn" class="copy-button"><i class="bi bi-clipboard"></i>                                Copy</button>
                        </div>
                        <pre id="code-display"><code></code></pre>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="download-code-btn" class="download-button" style="display: none;"><i class="bi bi-download"></i> Download ZIP</button>
                <button id="close-code-btn" class="cancel-button"><i class="bi bi-x-lg"></i> Close</button>
            </div>
        </div>
    </div>

    <!-- Test Case Generation Modal -->
    <div id="test-case-modal" class="modal" style="display: none;">
        <div class="modal-content test-case-modal-content">
            <div class="modal-header">
                <h2>Generate Test Cases</h2>
                <span class="close-btn" id="test-case-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="srs-description">SRS Description (Optional)</label>
                    <div class="textarea-with-tools">
                        <textarea 
                            id="srs-description" 
                            placeholder="Describe functionality to test... e.g. User Login Functionality: Users can log in with email and password, System validates credentials against database, Failed attempts are logged... If left empty, will generate comprehensive test cases based on Figma component."
                            rows="5"
                            maxlength="200000"></textarea>
                        <div class="textarea-tools">
                            <div class="character-counter">
                                <span id="char-count">0</span> / 200,000 characters
                            </div>
                            <button type="button" id="convert-to-markdown-btn" class="convert-button" title="Convert pasted text to structured markdown">
                                <i class="bi bi-markdown"></i> Convert to Markdown
                            </button>
                        </div>
                    </div>
                    <div class="help-text">
                        <p><strong>ðŸ’¡ Pro Tip:</strong> You can copy-paste content from Excel, Word, or any text format. Click "Convert to Markdown" to automatically structure and format your SRS content using AI.</p>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="project-name">Project Name (Optional)</label>
                    <input type="text" id="project-name" placeholder="e.g. E-commerce Platform" />
                </div>

                <div class="setting-group">
                    <label for="testing-framework">Testing Framework</label>
                    <select id="testing-framework">
                        <option value="manual">Manual Testing (Default)</option>
                        <option value="cypress">Cypress</option>
                        <option value="playwright">Playwright</option>
                        <option value="jest">Jest</option>
                        <option value="testing_library">Testing Library</option>
                        <option value="vitest">Vitest</option>
                        <option value="selenium">Selenium</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label for="test-generation-model">AI Model</label>
                    <select id="test-generation-model">
                        <option value="gpt-5-mini" selected>GPT-5 Mini (Cost-effective)</option>
                        <option value="o4-mini">O4 Mini (Higher quality)</option>
                        <option value="gpt-5">GPT 5 (Balanced quality)</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label for="test-generation-language">Test Case Language</label>
                    <select id="test-generation-language">
                        <option value="en" selected>English (Default)</option>
                        <option value="vi">Vietnamese</option>
                        <option value="ja">Japanese</option>
                    </select>
                </div>

                <div class="setting-group checkbox-group">
                    <label>
                        <input type="checkbox" id="include-ui-tests" checked>
                        Include UI Tests (using Figma component data)
                    </label>
                </div>

                <div class="setting-group">
                    <label for="additional-requirements">Additional Requirements (Optional)</label>
                    <textarea 
                        id="additional-requirements" 
                        placeholder="e.g. Use element names as test IDs in selectors, Emphasize validation error states for inputs, Include accessibility tests, Focus on mobile responsiveness, Test keyboard navigation..."
                        rows="3"></textarea>
                    <div class="suggestions">
                        <small style="color: #6b7280;">
                            <strong>Suggestions:</strong> 
                            "Use element names as test IDs" â€¢ 
                            "Emphasize input validation error states" â€¢ 
                            "Include keyboard navigation tests" â€¢ 
                            "Focus on mobile viewport testing"
                        </small>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="generate-test-cases-btn" class="save-button">
                    <i class="bi bi-play-fill"></i> Generate Test Cases
                </button>
                <button id="cancel-test-case-btn" class="cancel-button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Test Case Results Modal -->
    <div id="test-case-results-modal" class="modal" style="display: none;">
        <div class="modal-content test-case-results-modal-content">
            <div class="modal-header">
                <h2 id="test-case-results-title">Generated Test Cases</h2>
                <span class="close-btn" id="test-case-results-close">&times;</span>
            </div>
            <div class="modal-body test-case-results-body">
                <div class="loading-spinner" id="test-case-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Generating test cases...</p>
                </div>
                <div id="test-case-content" style="display: none;">
                    <!-- Test case summary will be displayed here -->
                    <div id="test-case-summary" class="test-summary"></div>
                    <!-- Test cases will be displayed here -->
                    <div id="test-case-list" class="test-case-list"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="export-test-cases-btn" class="download-button" style="display: none;">
                    <i class="bi bi-download"></i> Export Test Cases
                </button>
                <button id="close-test-case-results-btn" class="cancel-button">
                    <i class="bi bi-x-lg"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Export Format Selection Modal -->
    <div id="export-format-modal" class="modal" style="display: none;">
        <div class="modal-content export-format-modal-content">
            <div class="modal-header">
                <h2>Choose Export Format</h2>
                <span class="close-btn" id="export-format-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="format-options">
                    <div class="format-option" data-format="json">
                        <div class="format-icon">
                            <i class="bi bi-file-earmark-code"></i>
                        </div>
                        <div class="format-info">
                            <h3>JSON Format</h3>
                            <p>Export test cases as structured JSON data with complete test case details, grouping, and metadata. Focused on test case content only.</p>
                            <div class="format-features">
                                <span class="feature-tag">Complete Test Data</span>
                                <span class="feature-tag">Structured</span>
                                <span class="feature-tag">Machine Readable</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="format-option" data-format="markdown">
                        <div class="format-icon">
                            <i class="bi bi-file-earmark-text"></i>
                        </div>
                        <div class="format-info">
                            <h3>Markdown Format</h3>
                            <p>Export test cases as formatted markdown tables, perfect for documentation and sharing with team members.</p>
                            <div class="format-features">
                                <span class="feature-tag">Human Readable</span>
                                <span class="feature-tag">Table Format</span>
                                <span class="feature-tag">Documentation Ready</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="format-option" data-format="excel">
                        <div class="format-icon">
                            <i class="bi bi-file-earmark-spreadsheet"></i>
                        </div>
                        <div class="format-info">
                            <h3>Excel Format</h3>
                            <p>Export test cases as professional Excel workbooks with multiple worksheets, styling, and enhanced formatting.</p>
                            <div class="format-features">
                                <span class="feature-tag">Professional</span>
                                <span class="feature-tag">Multiple Sheets</span>
                                <span class="feature-tag">Enhanced Formatting</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirm-export-btn" class="save-button" disabled>
                    <i class="bi bi-download"></i> Export
                </button>
                <button id="cancel-export-btn" class="cancel-button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu" style="display: none;">
        <div class="context-menu-item" id="generate-code-item">
            <i class="bi bi-gear-fill"></i> Generate Code
        </div>
        <div class="context-menu-item" id="generate-test-case-item">
            <i class="bi bi-check2-square"></i> Generate Test Case
        </div>
    </div>

</body>

<script src="../deps/highlight/highlight.min.js"></script>
<script src="../deps/highlight/languages/javascript.min.js"></script>
<script src="../deps/highlight/languages/typescript.min.js"></script>
<script src="../deps/highlight/languages/java.min.js"></script>
<script src="../deps/highlight/languages/python.min.js"></script>
<script src="../deps/highlight/languages/csharp.min.js"></script>
<script src="../deps/highlight/languages/markdown.min.js"></script>
<script src="../scripts/constants.js"></script>
<script src="../scripts/utils.js"></script>
<script src="../scripts/utils/storageWrapper.js"></script>
<script src="../scripts/utils/testCaseValidation.js"></script>
<script src="../scripts/result/common.js"></script>
<script src="../scripts/result/getIconComponent.js"></script>
<script src="../scripts/result/figmaToCode.js"></script>
<script src="../scripts/result/testCaseGeneration.js"></script>

<script>
// Initialize dropdowns from constants when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    initializeDropdownsFromConstants();
});
</script>

</html>